name: Update package-lock.json

on:
  # یہ ورک فلو تب چلے گا جب package.json میں تبدیلی ہوگی اور اسے push کیا جائے گا
  push:
    branches:
      - main  # اپنی main branch کا نام یہاں لکھیں (جیسے master یا main)
    paths:
      - 'package.json'

jobs:
  update-lock:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        
      - name: Set up Node.js 20
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'
          
      - name: Install dependencies (This generates package-lock.json)
        # npm install کمانڈ چلانے سے package-lock.json فائل بن جائے گی
        run: npm install
        
      - name: Commit updated package-lock.json
        # یہ step نئی بنی ہوئی package-lock.json فائل کو commit کرے گا
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: "chore(deps): Auto-generate package-lock.json"
          # صرف package-lock.json کو commit کریں گے
          files: package-lock.json
